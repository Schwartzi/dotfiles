\documentclass{icsreport}

\title{オペレーティングシステム レポート課題} % 題目
\author{谷村亮介}                      % 提出者名
\date{平成25年7月29日(月)}                  % 提出日

\課題名{コンピュータの強制終了について}     % 課題名
\担当教官{村田正幸}                       % 担当教官名
\所属{ソフトウェア科学コース}             % 自分の所属するコース名などを指定する.
\学年{3年}                             % 学年
\学籍番号{09B11044}                    % 学籍番号
                                      % 班やグループ名.
                                      % 必要なければ指定しなくてもよい.
\email{u549298j@ecs.osaka-u.ac.jp}    % 電子メールのアドレス

\usepackage{ascmac}
\usepackage{here}
\usepackage{txfonts}
\usepackage{listings, jlisting}
\usepackage{color}
\usepackage[dvips]{graphicx}


\definecolor{OliveGreen}{cmyk}{0.64,0,0.95,0.40}
\definecolor{colFunc}{rgb}{1,0.07,0.54}
\definecolor{CadetBlue}{cmyk}{0.62,0.57,0.23,0}
\definecolor{Brown}{cmyk}{0,0.81,1,0.60}
\definecolor{colID}{rgb}{0.63,0.44,0}

\lstdefinelanguage{ASM}{
morekeywords={LDHX, TXS, CLI, LDA, STA, AND, BEQ, BRA,
              INCA, CMP, feed_watchdog},%
morecomment=[l]{;},%
morestring=[b]",%"
}

\renewcommand{\lstlistingname}{リスト}
\lstset{language=ASM,
  backgroundcolor={\color[gray]{.95}},%
  basicstyle=\sffamily\scriptsize,
  keywordstyle={\bfseries \color{OliveGreen}},
  frame=tRBl,
  framesep=5pt,
  showstringspaces=false,
  numbers=left,
  stepnumber=1,
  numberstyle=\sffamily\tiny,
  tabsize=2
}

\begin{document}
\maketitle

\section{課題内容}

コンピュータの動作中、
電源をいきなり落とすとなぜまずいのか。
UNIXとWINDOWSの違いがあるのはなぜか。

\section{解答}

\subsection{HDDの構造上の問題}
近年では主記憶装置としてSSDのみを搭載しているPCも存在するが、
ここではHDDを搭載しているPCについて考える。

HDDは、高速回転するプラッタの上を磁気ヘッドが移動し、
データの読み込み・書き込みを行うという構造をしている。
データの読み書きがない時は、
磁気ヘッドは安全な場所で待機しているため、
この時に電源が急に切れてしまっても、HDD自体は安全である。
しかし、データの読み書き中に電源が切れてしまうと、
磁気ヘッドはプラッタ上に存在するため、
これらが衝突してしまい、物理的損傷を受けてしまうことがある。
このように、HDD自体が故障してしまう可能性があるため、
PCの電源をいきなり切ってはいけない。


\subsection{OSの仕組み上の問題}
HDDが読み書き中でない時は、
電源を急に落としても問題ないかというと、
そうではない。OSの仕組み上の問題が存在するからである。
OSは、普通HDDに格納されているが、
処理速度を向上させるために、
その一部はメモリにロードされている。
メモリ上にいるOSは、
様々な処理を常時行なっているため、
HDD上にあるOSとの差異が生じている状態になっている。
メモリの内容は通電していないと失われてしまうので、
OSをシャットダウンする際には、
メモリ上のデータをHDDに保管するという作業を行なっている。
もし、急に電源が切れてしまった時は、
メモリのデータがすべて失われてしまう。
もし、OSの設定値を変更し、それをHDDに書き込む前に終了してしまった場合などは、
HDDのOSの内容に矛盾が発生してしまい、
起動時にトラブルが発生してしまう場合がある。
このような問題を防ぐために、
PCの電源を急に切ってはいけない。

\subsection{UNIXとWindowsの違い}
急にPCの電源を切るのは良くないとは言っても、
WindowsのPCを使っていると、
プログラムがフリーズして操作を受け付けなくなり、
やむを得ず電源ボタンを長押しして強制終了することがよくある。
このようなときに再度電源を入れると、
ディスクチェックが自動的に行われ、
特に問題なくOSを動作させることができる。

しかし、UNIXのPCの場合は、
電源を急に切るということは絶対に許されないということをよく耳にする。
これにはいくつか理由がある。
UNIXでは、ファイルに対する書き込みは、まずメモリー上のバッファーへの書き込みとして処理され、
一定の時間の経過の後ではじめて、ディスク上に書き戻される。 [\ref{ss}]
こうすることによって、ファイル入出力の回数や時間を大幅に減らすことができるのである。
従って、ファイルの実際の状態は、 あるべき状態からずれていることが多い。
よって、いきなり電源を切ることは、多くのファイルに大きなダメージを与えてしまう。
また、UNIXはマルチユーザーのOSであるから、
他のユーザーがネットワーク越しにプロセスを実行しているかもしれないし、
バックグラウンドでプロセスを走らせているかもしれない。
こういう環境が想定されるため、
安易に電源を落としてはいけないのである。


\newpage

\begin{thebibliography}{9}


\bibitem{ss}

「2.5 シャットダウン」
``http://www.wakhok.ac.jp/biblion/1998/netadmin/node337.html''
(2013/7/27アクセス)

\bibitem{au}
「UNIXの基礎知識」
``http://www-seis.planet.sci.kobe-u.ac.jp/~kakehi/unix-HOWTO_j.html''
(2013/7/27アクセス)

\end{thebibliography}

\end{document}
