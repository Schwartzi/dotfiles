\documentclass{icsreport}

\title{\Huge{計算機言語} \\ 第5回レポート課題} % 題目
\author{谷村亮介}                      % 提出者名
\date{平成25年1月16日}                  % 提出日

\課題名{期末試験の予想問題作成}     % 課題名
\担当教官{大崎博之}                       % 担当教官名
\所属{ソフトウェア科学コース}             % 自分の所属するコース名などを指定する. 
\学年{2年}                             % 学年
\学籍番号{09B11044}                    % 学籍番号
                                      % 班やグループ名.
                                      % 必要なければ指定しなくてもよい. 
\email{u549298j@ecs.osaka-u.ac.jp}    % 電子メールのアドレス


\begin{document}

\maketitle


\section{課題内容}
講義で学んだ概念から、最も苦手 (よく理解できてない) と思うものを 2 つ選び、講義資料を読み返して復習せよ。
その後、それらの概念に関する、 期末試験の予想問題 (それぞれ 1 問ずつ) と、
出題の意図、問題に対する回答を記述せよ。
講義資料と同じ問題、過去の期末試験と同じ問題は禁ずる。

今回では、授業で学んだ概念の中から、
「演算子と優先順位」、「分岐の実現」を選択した。

\section{演算子と優先順位}

\subsection{予想問題}

以下に示したPascalのサンプルコードは、プログラムの一部を示している。
このコードを実行した結果、integer型の変数xにある値を代入すると
エラーが起こった。
この時の変数xの値と、エラーが起こった理由を答えよ。
また、エラーが出ないようにこの部分のプログラムを書きなおせ。
なお、変数xに代入できる値は、Pascalで扱えるinteger型の値の範囲を超えない
整数とする。

\begin{verbatim}
if (x = 0) or (a div x > 3) then begin
   println("OK!")
end     
\end{verbatim}

\subsection{出題意図}

演算子の評価順についてはプログラミング言語によって曖昧な部分もあり、
バグの原因となりやすい。
講義資料のサンプルコードを参考にして、このことを発見できるかを問う問題にした。

\subsection{回答}

\textgt{変数xの値}\\
0\\

\textgt{理由}\\
x=0の時に(a div x > 3)が評価されてしまったから。

\textgt{正しいコード}\\
\begin{verbatim}
if x = 0 then begin end
else if a div x > 3 then begin
   println("OK!")
end     
\end{verbatim}

\section{分岐の実現}

\subsection{予想問題}

以下に、C言語におけるforループのサンプルコードと、
それをコンパイルして生成されたアセンブラのソースを示す。
これを読むと、forループはwhile文で書き換え可能であることがわかる。
サンプルコードを、アセンブラのソースが同じになるように、
while文で書き換えよ。


\begin{verbatim}       
int main(){
   int i, j;

   j = 123;
   for (i = 0; i <= 10; i++)
     j += 2;
   return (j);
}
\end{verbatim}

\begin{verbatim}
    .text
    .globl _main
_main:
LFB0:
    pushq   %rbp
LCFI0:
    movq    %rsp, %rbp
LCFI1:
    movl    $123, -8(%rbp)
    movl    $0, -4(%rbp)
    jmp     L2
L3:
    addl    $2, -8(%rbp)
    addl    $1, -4(%rbp)
L2:
    cmpl    $10, -4(%rbp)
    jle     L3
    movl    -8(%rbp), %eax
    popq    %rbp
LCFI2:
    ret
\end{verbatim}

\subsection{出題意図}

forループはあまり好きではないと授業中に先生がおっしゃっていたので、
while文で書き換えても同じ処理が行えることを示す問題にしました。

\subsection{回答}

\begin{verbatim}       
int main(){
   int i, j;
        
   j = 123;
        
   i = 0;
   while(i <= 10) {
      j += 2;
      i++;
   }
   return (j);
}
\end{verbatim}

\end{document}