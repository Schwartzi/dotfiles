\documentclass[titlepage]{jsarticle}

\title{\sf{\Huge{情報科学実験A後期\\中間レポート}}}
\author{担当教員:大下裕一、置田真生\\
氏名:谷村亮介\\
学籍番号:09B11044}
\date{平成24年12月25日(月)}
\begin{document}


\maketitle


\section{課題01}

\subsection{課題内容}

フリップフロップの役割を調べ、まとめよ。


\subsection{解答}

フリップフロップとは、1ビットの情報を''1''または''0''
として記憶することができる回路であり、
過去の入力に依存して次の状態が決まる「順序回路」に用いられる。
コンピュータのRAMやレジスタにも用いられる。


\section{課題02}

\subsection{課題内容}

RSTフリップフロップの動作原理を説明し、
クロックT、S、R、現状態のQ、次状態のQに関する真理値表を作れ。

\subsection{解答}

まず、すべての入力が0の場合を考える。
このとき、左のNANDからは1が出力される。
Qが0の時、右下のNANDは1を出力し、1の時は、0を出力する。
$\overline{Q}$が0の時、右上のNANDは1を出力し、1の時は0を出力する。
すなわち、この時は出力を変化させない。

ここで、入力Tの役割について考える。
Tが0の時、左のNANDはR、Sの状態によらず1が出力される。
この時は、上で説明したように、出力が保持される。
Tが1の時、左のNANDはR、Sを反転して出力する。
つまり、Tはクロック入力の役割を果たしている。

以下は、クロックTが1である場合を考える。
SとRが0の時は、初めと同様に出力を変化させない。
この状態で、Sを1、Rを0にすると、
SにつながるNANDから0が出力され、Qが1になる。
また、$\overline{Q}$につながるNANDは入力が両方1になるため、
$\overline{Q}$は0になる。
このあとSを0にしても、QにつながるNANDは片方の入力が0になっているため、
1を出力し続ける。
ここで、Rを1にすると、
RにつながるNANDから0が出力され、$\overline{Q}$が1になる。
QにつながるNANDはの入力がどちらも1になるため、Qは0になる。
このあとRを0にしても、値は保持される。

SとRの両方を1にしたときは、左のNANDの出力が両方0になる。
すると、出力は2つとも1になるが、
これは、Qが現在も次も1になることを示しており、
フリップフロップとして矛盾が起こる。

以上の説明から得られた、RSTフリップフロップの真理値表を表\ref{tab1}にしめす。

\begin{table}[htbp]
  \centering
  \begin{tabular}{@{} ccc|cc @{}}
    \hline
     T & S & R & Q & $\overline{Q}$ \\ 
    \hline
     0 & d & d & Q & $\overline{Q}$\\
     1 & 0 & 0 & Q & $\overline{Q}$\\
     1 & 1 & 0 & 1 & 0\\
     1 & 0 & 1 & 0 & 1\\
     1 & 1 & 1 & 1 & 1\\
    \hline
  \end{tabular}
  \caption{RST-FFの真理値表}
  \label{tab1}
\end{table}



%%
\section{課題03}
\subsection{課題内容}



\subsection{解答}


%%
\section{課題04}
\subsection{課題内容}
\subsection{解答}



\section{課題05}
\subsection{課題内容}

RSTフリップフロップの問題点を述べよ。

\subsection{解答}

SとRを同時に1にする入力が禁止されていること。
もしこの入力を行なってしまうと、
値が不定となる。



\section{課題06}
\subsection{課題内容}

TTL-ICの一部のICには、セット機能、リセット機能がついているが、
これらの機能の必要性を完結に述べよ。
また、これらの機能をつけることによるデメリットも挙げよ。

\subsection{解答}

7476のセット、リセット機能は、
それぞれの端子をLレベルにセットすることで、
Qの値を強制的に1や0にすることができる。
今回作成するデジタル時計のように、
フリップフロップの出力を、
現在の状態にかかわらず、
任意の瞬間に強制的に0にしたい時などに、
リセット機能が必要になる。

セット、リセット端子を両方ともLレベルにセットすると、
出力が矛盾するため、この入力は禁止されている。
禁止入力が増えてしまうということが、
これらの機能をつける上でのデメリットである。

%%
\section{課題07}
\subsection{課題内容}

7400、7404、7476のIC回路をBDFファイルに挿入し、シミュレーションにより動作を確認せよ。
ICの挙動について簡潔に説明し、シミュレーション結果の波形をレポートに掲載する。

\subsection{解答}

7400は、入力端子を2つ、出力端子を1つ持ち、
2つの入力のNANDを出力するIC回路である。

7404は入出力の端子をそれぞれ1つずつ持ち、
入力のNOTを出力するIC回路である。

7406は、JKフリップフロップを2つ持つIC回路である。
セット、リセット機能がついている。

それぞれの回路の挙動を示すシミュレーション結果を
%%
に示す。


%%
\section{課題08}
\subsection{課題内容}

JKFFを2進カウンタとして利用し、
2進カウンタ2つを組み合わせて非同期式4進カウンタを作成せよ。
どのように組み合わせればよいかを述べよ。
外部から取り込まれるクロック信号に対して、各2進カウンタの内部状態がどのように変化するのかを考え、
それを示せ。

\subsection{解答}

JKFFは、JとKの端子をどちらもHレベルにセットしておくことで、
クロックの立下りのたびに出力が変化する2進カウンタとして利用できる。
この2進カウンタを2つ用意し、
一方のカウンタの出力をもう一方のカウンタのクロック信号として取り込むことで、
非同期式4進カウンタを作成できる。

以下、2つのJKFFの出力を$Q_1$、$Q_2$とし、
$Q_1$の値をもう一方のカウンタのクロック信号として取り込むことにする。
この状態で、各2進カウンタの内部状態の変化を示す。
まず、クリア機能を使用して$(Q_1,Q_2) = (0,0)$になった状態から考える。
次に、外部からクロック信号を入れると、
$(Q_1,Q_2) = (1,0)$
となる。
もう一度クロック信号を入れると、
$Q_1$の値が0になり、
それに応じて$Q_2$の値が1になる。
結果として$(Q_1,Q_2) = (0,1)$の状態となる。
もう一度クロック信号を入れると、
$(Q_1,Q_2) = (1,1)$となる。
次にクロック信号を入れると、
$Q_1$の値が0になり、
それに応じて$Q_2$の値が0になる。
結果として初めと同じ、
$(Q_1,Q_2) = (0,0)$の状態に戻る。
以上のような変化により、4つの状態を遷移する、4進カウンタが作成できる。


%%
\section{課題09}
\subsection{課題内容}

規格表の読み方を調べ、まとめよ。

\subsection{解答}



\section{課題10}
\subsection{課題内容}

クロックの立ち上がりと立ち下がりのどちらでカウントするのかを、
規格表のどこに書かれているのかとともに、述べよ。

\subsection{解答}

規格表右上の表の、
クロック入力AとBの欄を見ると、
クロック波の形が描かれており、
立ち下がり部分に下矢印が示してある
(\verb+|￣↓+)
これが、クロックの立ち下がりでカウントすることを示している。



\section{課題11}
\subsection{課題内容}

$Q_a$とInputBを連結することで10進カウンタになることを、
課題8の回答を元に説明せよ。

\subsection{解答}

InputAにクロック信号を与えると、
$Q_a$の出力は1と0を交互に繰り返すようになる。
ここで、$Q_a$とInputBを連結することで、
$Q_a$が1から0になる際に5進カウンタが1つ進むようになる。
このようにして、10進カウンタが作成される。



\section{課題12}
\subsection{課題内容}

カウンタとして動作するためには、
7490のR0、R9をどのようにするのかを書け。

\subsection{解答}

規格表より、
カウンタとして動作させるためには、
R0、R9をどちらもLレベルにセットしておく。



\section{課題13}
\subsection{課題内容}

クリアするためには、7490のR0、R9をどのようにするのかを書け。

\subsection{解答}

規格表より、クリアするためには、
R0をHレベルにすれば、その間は0000が出力される。
このとき、R9はドントケアである。



\section{課題14}
\subsection{課題内容}

プリセット9するためには、7490のR0、R9をどのようにするのかを書け。

\subsection{解答}

規格表より、プリセット9するためには、
R0をLレベル、R9をHレベルにすれば、
R9がHレベルである間、1001が出力される。


%%
\section{課題15}
\subsection{課題内容}

10進数で0→5まで順番に遷移する非同期式6進カウンタの回路図を書き、
3つのFFの動作原理を説明せよ。

\subsection{解答}

%%回路図

$Q_c$と$Q_b$は、InputBのクロックが立ち下がるたびに、
00→01→10→00と変化する。
ここで、$Q_a$をInputBに接続すると、
$Q_a$が1から0に変わるたびに、
$Q_c$と$Q_b$の値が変化する。
よって、$Q_c$、$Q_b$、$Q_a$の値は
000→001→010→011→100→101→000
と変化していき、
10進数で0→5まで順番に遷移する非同期式6進カウンタが完成する。




\section{課題16}
\subsection{課題内容}

クロックの入力に対して適切にカウントアップするためには、
7492のR0の電位をどのようにするのかを書け。

\subsection{解答}

規格表より、
適切なカウントアップのためには、
R0のをLレベルにセットしておく。




\section{課題17}
\subsection{課題内容}

クリアするためには、7492のR0の電位をどのようにするのかを書け。

\subsection{解答}

規格表より、
R0の電位をHレベルにセットすると、その間だけ0000が出力される。


%%
\section{課題18}
\subsection{課題内容}

作成したdigitalclock全体のBDFを記載し、
各部について説明せよ。

\subsection{解答}




%%
\section{課題19}
\subsection{課題内容}

digitalclockの
動作をシミュレーションで確認し、
波形をレポートに記載せよ。
出力結果は10進表記で見やすくする。
リセットの動作についても確認する。

\subsection{解答}



\section{課題20}
\subsection{課題内容}

RESETボタンの代わりに、FPGAボードのスイッチSW1を入力すると
デジタル回路がリセットされるように変更せよ。
FPGAボードのマニュアルを調べ、適切にピン情報を追加し、回路を変更せよ。
調査内容と作業手順をレポートに記載すること。

\subsection{解答}

FPGAマニュアルの「表2.3.4-1 スイッチ入力部配線表」
を見ると、
スイッチPSW\_A0のピン番号が2で、
このスイッチは負論理であることがわかった。

そこで、disitalclock.qsfに
\verb+set_location_assignment PIN_2 -to PSW_A0+
という行を追加した。
そして、disitalclock.bdfにPSW\_A0という名前のInput線を追加し、
間にNOT回路をはさんで各カウンタのクリア入力に接続した。


%%
\section{課題21}
\subsection{課題内容}

ブレッドボード内部では、どのように配線されているか、
テスタを用いて調べ、図示せよ。

\subsection{解答}




\section{課題22}
\subsection{課題内容}

なぜ、そのような配線になっているのかを考察せよ。

\subsection{解答}

ブレッドボードの溝部分をまたぐようにICを配置すると、 
ICのすべての端子が独立した部分に接続されるようになる。
また、それぞれの穴は横方向に導通しているため、
ICの各端子に他の素子やジャンプワイヤを複数個つなげることができる。
このように、ブレッドボードの配線は、
ICを用いた際に最適な配線になっていると考えられる。

また、ブレッドボードの端の2列は、
縦方向につながっている。
ここに電源のVCCとGNDをつなげておけば、
一箇所にこれらの端子を集約することができ、
見やすい回路を作成することができるようになっている。



\section{課題23}
\subsection{課題内容}

前期の実験で用いたプリント基板を用いた場合と、
ブレッドボードを用いた場合とでは、
それぞれどのような利点と欠点があるか考察せよ。

\subsection{解答}

プリント基板を用いた場合は、
回路に大きな電流を流すことができ、
一度上手くハンダ付けしておけば接触不良が起こりにくいという利点がある。
また、上手く回路設計を行えば、
すっきりとした配線を組むことが可能である。
しかし、ハンダ付けをした後は回路の変更が難しいという欠点がある。

ブレッドボードを用いた場合は、
回路変更が容易に行えるため、回路の試作を行う際に便利である。
ただし、接点の抵抗のために、
大きな電流を流す回路には向かない。
また、ジャンプワイヤを用いて配線を行うため、
プリント基板を用いて配線した場合に比べて、
回路は見難くなってしまう。
外部からの衝撃などによってワイヤがはずれ、
接触不良を起こしやすいということも、
欠点の1つである。



\section{課題24}
\subsection{課題内容}

ブレッドボード上の回路を見やすくするための配線の工夫を考察せよ。

\subsection{解答}

配線の工夫は以下のような物が考えられる。

\begin{itemize}

\item VCC、GNDのジャンプワイヤの色はそれぞれ赤、黒に統一し、
  一箇所にまとめておく。
\item カウンタのクロック信号線、出力線、セット線、リセット線など、配線の機能ごとに、
  使用するジャンプワイヤの色を統一する。
\item 近くの端子同士を接続するジャンプワイヤは短いものを選択する。
\item ICを複数個使用する場合は、適度な間隔を開けておく。

\end{itemize}



\section{課題25}
\subsection{課題内容}

同期式6進カウンタの設計手順を詳しく述べよ。
用いるFFは7476または74LS76のみとする。
各FFの論理入力は、
実験室に用意されている74シリーズのICのみを組み合わせて作成する。

\subsection{解答}

\subsubsection{A)[手順1]状態割付け}

回路は6状態異常保持できればよいので、
FF3個で実現できる。
それぞれのFFの出力を、$Q_1$、$Q_2$、$Q_3$とする。
ここでは、実験資料で与えられたのと同じように状態を割り付けるものとする。
状態割付けの表を、表\ref{state}に示す。

\begin{table}[htbp]
  \centering
  \begin{tabular}{@{} c|ccc @{}}
    \hline
    クロック & $Q_1$ & $Q_2$ & $Q_3$  \\ 
    \hline
    0 & 0 & 0 & 0  \\
    1 & 1 & 0 & 0  \\
    2 & 0 & 1 & 0  \\
    3 & 1 & 1 & 0  \\
    4 & 0 & 0 & 1  \\
    5 & 1 & 0 & 1  \\
    \hline
  \end{tabular}
  \caption{状態割付け}
  \label{state}
\end{table}


\subsubsection{B)[手順2]FFの決定と励起表の作成}
\label{tej}

ここでは、3個ともにJKFFを用いることにする。
ICには、74LS76を2つ用いることにする。
状態$Q_1$から$Q_1$に変化させるために、
入力JKをどのような値にしておけばよいかを示した励起表を表\ref{reikijk}に示す。
ここで、''d''はドントケアを表す。

\begin{table}[htbp]
  \centering
  \begin{tabular}{@{} cc|cc @{}}
    \hline
    $Q_t$ & $Q_t + 1$ & J & K  \\ 
    \hline
    0 & 0 & 0 & d  \\
    0 & 1 & 1 & d  \\
    1 & 0 & d & 1  \\
    1 & 1 & d & 0  \\
    \hline
  \end{tabular}
  \caption{JKFFの励起表}
  \label{reikijk}
\end{table}


\subsubsection{C)[手順3]FFに対する論理入力の決定}

作成した励起表と状態割付けの結果から、FF3個の入力論理を求める。
各状態におけるJKFFの入力と、桁上り信号zの状態を表\ref{ronri}に示す。
あああああ
\begin{table}[htbp]
  \centering
  \begin{tabular}{@{} c||cc|cc|cc|c @{}}
    \hline
    $Q_1Q_2Q_3$ & $J_1$ & $K_1$ & $J_2$ & $K_2$ & $J_3$ &  $K_3$ & z\\ 
    \hline
    000 & 1 & d & 0 & d & 0 & d & 0\\
    100 & d & 1 & 1 & d & 0 & d & 0\\
    010 & 1 & d & d & 0 & 0 & d & 0\\
    110 & d & 1 & d & 1 & 1 & d & 0\\
    001 & 1 & d & 0 & d & d & 0 & 0\\
    101 & d & 1 & 0 & d & d & 1 & 1\\
    \hline
  \end{tabular}
  \caption{JKFFの入力と桁上り}
  \label{ronri}
\end{table}

表\ref{ronri}について説明する。
例えば、$Q_1Q_2Q_3$が000から100に変化するとき、
$Q_1$を0から1に変化させたいから、
表\ref{reikijk}より、100の行の$J_1$ と$K_1$はそれぞれ、1、dとする。
これを、すべての場合で考えると、
表\ref{ronri}が完成する。

また、桁上り信号については、
101の時1で、その他の状況では、0になるように設定してある。

表\ref{ronri}から、
各JKFFの入力論理が以下のように決定する。

\begin{eqnarray*}
J_1 & = & 1 \\
K_1 & = & 1 \\
J_2 & = & Q_1 \wedge \overline{Q_3} \\
K_2 & = & Q_1 \wedge Q_2 \\
J_3 & = & Q_1 \wedge Q_2 \\
K_3 & = & Q_1 \wedge Q_3 \\
z   & = & Q_1\overline{Q_2}Q_3 \\
\end{eqnarray*}

以上の入力論理にしたがって、
各JKFFに入力を与えれば、6進カウンタが完成する。



%%
\section{課題26}
\subsection{課題内容}

同期式6進カウンタの回路図を書け。
回路図において、通常にカウンタを動作するには、
リセット信号線をどのように配線するか、
リセット信号線の電圧をどのようにするのかを書け。

\subsection{解答}

通常にカウンタを動作するためには、
JKFFの3つのリセット端子にリセット信号線をつなぎ、
1つにまとめておく。
規格表より、
リセット信号線の電圧をHレベルにしておけば、
カウンタが動作する。



\section{課題27}
\subsection{課題内容}

\subsection{解答}




%%
\section{課題28}
\subsection{課題内容}

6進カウンタの桁上りは、
どの出力がどのようになった時であるか、
説明せよ。

\subsection{解答}

10進カウンタはクロックの立ち下がりで次に進むため、
$Q_1Q_2Q_3$が101になった時に、
桁上りを1し、
$Q_1Q_2Q_3$が000になった時に、
0にすれば良い。


\section{課題29}
\subsection{課題内容}

7476はマスタースレーブ型、74LS76はネガティブリーディングエッヂトリガ型である。
これらの違いをまとめよ。

\subsection{解答}

マスタースレーブ型では、前段と後段に分かれてFFが配置されており、
クロックの立ち上がりでは、後段の出力を反転したものを前段のFFに記憶し、
クロックの立ち下がりでは、前段の出力を後段のFFに転送する。
FFを2段構成にして信号を受け渡しすることにより、
クロックの幅が長くても発振を起こすことがない。
また、クロックの立ち上がりから立ち下がりまでデータを保持しなければならない。

ネガティブリーディングエッヂトリガ型では、
ストローブ信号の立ち下がりでトリガする。
すなわち、クロックの立ち下がり時のみデータを保持すれば良い。


%%
\section{課題30}
\subsection{課題内容}

同期式カウンタ、非同期式カウンタの利点、欠点についてまとめよ。
どのような場合に、非同期式カウンタが問題となるかについて述べよ。

\subsection{解答}


%%
\section{課題31}
\subsection{課題内容}

同期式10進カウンタを前節の手順に従って設計し、
その設計について具体的に説明せよ。

\subsection{解答}

\subsubsection{A)[手順1]状態割付け}

回路は10状態異常保持できればよいので、
FF4個で実現できる。
それぞれのFFの出力を、$Q_1$、$Q_2$、$Q_3$、$Q_4$とする。
状態割付けの表を、表\ref{state2}に示す。

\begin{table}[htbp]
  \centering
  \begin{tabular}{@{} c|ccc @{}}
    \hline
    クロック & $Q_1$ & $Q_2$ & $Q_3$ &$Q_4$ \\ 
    \hline
    0 & 0 & 0 & 0 & 0 \\
    1 & 1 & 0 & 0 & 0 \\
    2 & 0 & 1 & 0 & 0 \\
    3 & 1 & 1 & 0 & 0 \\
    4 & 0 & 0 & 1 & 0 \\
    5 & 1 & 0 & 1 & 0 \\
    6 & 0 & 1 & 1 & 0 \\
    7 & 1 & 1 & 1 & 0 \\
    8 & 0 & 0 & 0 & 1 \\
    9 & 1 & 0 & 0 & 1 \\
    \hline
  \end{tabular}
  \caption{10進カウンタの状態割付け}
  \label{state2}
\end{table}

\subsubsection{B)[手順2]FFの決定と励起表の作成}

ここでは、3個ともにJKFFを用いることにする。
ICには、74LS76を2つ用いることにする。
状態$Q_1$から$Q_1$に変化させるために、
JKFFの励起表については\ref{tej}章の表\ref{reikijk}に示してある。


\subsubsection{C)[手順3]FFに対する論理入力の決定}

作成した励起表と状態割付けの結果から、FF4個の入力論理を求める。
各状態におけるJKFFの入力と、桁上り信号zの状態を表\ref{ronri2}に示す。


\begin{table}[htbp]
  \centering
  \begin{tabular}{@{} c||cc|cc|cc|c @{}}
    \hline
    $Q_1Q_2Q_3Q_4$ & $J_1$ & $K_1$ & $J_2$ & $K_2$ & $J_3$ &  $K_3$ & $J_4$ &  $K_4$ z\\ 
    \hline
    0000 & 1 & d &   0 & d &   0 & d &   0 & 0 & 0\\
    1000 & d & 1 &   1 & d &   0 & d &   0 & 0 & 0\\
    0100 & 1 & d &   d & 0 &   0 & d &   0 & 0 & 0\\
    1100 & d & 1 &   d & 1 &   1 & d &   0 & 0 & 0\\
    0010 & 1 & d &   0 & d &   d & 0 &   0 & 0 & 0\\
    1010 & d & 1 &   1 & d &   d & 0 &   0 & 0 & 0\\
    0110 & 1 & d &   d & 0 &   d & 0 &   0 & 0 & 0\\
    1110 & d & 1 &   d & 0 &   d & 0 &   1 & d & 0\\
    0001 & 1 & d &   0 & d &   0 & d &   d & 0 & 0\\
    1001 & d & 1 &   0 & d &   0 & d &   0 & 0 & 1\\
    \hline
  \end{tabular}
  \caption{JKFFの入力と桁上り}
  \label{ronri2}
\end{table}

表\ref{ronri}について説明する。
例えば、$Q_1Q_2Q_3$が000から100に変化するとき、
$Q_1$を0から1に変化させたいから、
表\ref{reikijk}より、100の行の$J_1$ と$K_1$はそれぞれ、1、dとする。
これを、すべての場合で考えると、
表\ref{ronri}が完成する。

また、桁上り信号については、
101の時1で、その他の状況では、0になるように設定してある。

表\ref{ronri}から、
各JKFFの入力論理が以下のように決定する。

\begin{eqnarray*}
J_1 & = & 1 \\
K_1 & = & 1 \\
J_2 & = & Q_1 \wedge \overline{Q_3} \\
K_2 & = & Q_1 \wedge Q_2 \\
J_3 & = & Q_1 \wedge Q_2 \\
K_3 & = & Q_1 \wedge Q_3 \\
z   & = & Q_1\overline{Q_2}Q_3 \\
\end{eqnarray*}

以上の入力論理にしたがって、
各JKFFに入力を与えれば、6進カウンタが完成する。



\section{課題32}

\subsection{課題内容}

教員もしくはTAによる動作確認日時を記載せよ。


\subsection{解答}

2012/12/8 16:00頃


\section{課題33}

\subsection{課題内容}

ここまでの感想を述べよ。
苦労した点がある場合、なぜ苦労したか、
どうすればもっと効率良く作業できたかを検討せよ。

\subsection{解答}

実験を始めた当初は、
手順書の通りに進めていくだけで精一杯だったが、
実験の回数を重ねていくに連れて、
作業内容の理解も深まり、
自分の力で考えて回路を作成して行く事ができるようになってきた。
また、この実験の内容が他の授業の内容と密接に関連していることに気づき、
授業で習った内容を実験に十分に生かすことができた。

実験で苦労したことは、
ちょっとしたミスになかなか気づくことができずに時間を無駄にしてしまったことである。
ミスをしやすい部分については手順書に詳しく書かれていることも多いので、
しっかり読み込んで置くことが重要だと思った。


\end{document}
